---
title: 'ðŸ§€ Longest Turbulent Subarray'
description: '[leetcode link](https://leetcode.com/problems/longest-turbulent-subarray/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>Given an integer array <code>arr</code>, return <em>the length of a maximum size turbulent subarray of</em> <code>arr</code>.</p>  <p>A subarray is <strong>turbulent</strong> if the comparison sign flips between each adjacent pair of elements in the subarray.</p>  <p>More formally, a subarray <code>[arr[i], arr[i + 1], ..., arr[j]]</code> of <code>arr</code> is said to be turbulent if and only if:</p>  <ul>  <li>For <code>i &lt;= k &lt; j</code>:   <ul>   <li><code>arr[k] &gt; arr[k + 1]</code> when <code>k</code> is odd, and</li>   <li><code>arr[k] &lt; arr[k + 1]</code> when <code>k</code> is even.</li>  </ul>  </li>  <li>Or, for <code>i &lt;= k &lt; j</code>:  <ul>   <li><code>arr[k] &gt; arr[k + 1]</code> when <code>k</code> is even, and</li>   <li><code>arr[k] &lt; arr[k + 1]</code> when <code>k</code> is odd.</li>  </ul>  </li> </ul>   <p><strong class="example">Example 1:</strong></p>   <strong>Input:</strong> arr = [9,4,2,10,7,8,8,1,9] <br/> <strong>Output:</strong> 5 <br/> <strong>Explanation:</strong> arr[1] &gt; arr[2] &lt; arr[3] &gt; arr[4] &lt; arr[5]   <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> arr = [4,8,12,16] <br/> <strong>Output:</strong> 2   <p><strong class="example">Example 3:</strong></p>   <strong>Input:</strong> arr = [100] <br/> <strong>Output:</strong> 1    <p><strong>Constraints:</strong></p>  <ul>  <li><code>1 &lt;= arr.length &lt;= 4 * 10<sup>4</sup></code></li>  <li><code>0 &lt;= arr[i] &lt;= 10<sup>9</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Calculate comparisons array, with -1,0,1 values, find longest streak of alternating 1 and -1.
Answer is max_streak_length + 1.
    </Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Longest Turbulent Subarray" lines
# @param {Integer[]} arr
# @return {Integer}
def max_turbulence_size(arr)
  n = arr.size
  
  return [0, 1, (arr[0] == arr[1] ? 1 : 2)][n] if n < 3
  
  return 1 if arr.uniq.size == 1 # special case of all same numbers

  comparisons = (1...n).map { |i| arr[i] <=> arr[i-1] }
  comparisons_size = n-1

  max_len = 0 
  current_pointer = 0

  while current_pointer < comparisons_size
    # initializing streak of alternating 1,-1 , but streak is of elements in comparisons array
    # 1 comparison element means, 2 elements in arr, hence initialize with len = 2
    len = 2

    while current_pointer + 1 < comparisons_size && comparisons[current_pointer] * comparisons[current_pointer+1] == -1
      len +=1
      current_pointer += 1
    end

    max_len = [max_len, len].max
    
    current_pointer += 1
  end

  max_len
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>