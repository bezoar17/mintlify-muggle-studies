---
title: "ðŸ§€ Target Sum"
description: '[leetcode link](https://leetcode.com/problems/target-sum/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given an integer array <code>nums</code> and an integer <code>target</code>.</p>  <p>You want to build an <strong>expression</strong> out of nums by adding one of the symbols <code>&#39;+&#39;</code> and <code>&#39;-&#39;</code> before each integer in nums and then concatenate all the integers.</p>  <ul>  <li>For example, if <code>nums = [2, 1]</code>, you can add a <code>&#39;+&#39;</code> before <code>2</code> and a <code>&#39;-&#39;</code> before <code>1</code> and concatenate them to build the expression <code>&quot;+2-1&quot;</code>.</li> </ul>  <p>Return the number of different <strong>expressions</strong> that you can build, which evaluates to <code>target</code>.</p>   <p><strong class="example">Example 1:</strong></p>   <strong>Input:</strong> nums = [1,1,1,1,1], target = 3 <br/> <strong>Output:</strong> 5 <br/> <strong>Explanation:</strong> There are 5 ways to assign symbols to make the sum of nums be target 3. -1 + 1 + 1 + 1 + 1 = 3 +1 - 1 + 1 + 1 + 1 = 3 +1 + 1 - 1 + 1 + 1 = 3 +1 + 1 + 1 - 1 + 1 = 3 +1 + 1 + 1 + 1 - 1 = 3   <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> nums = [1], target = 1 <br/> <strong>Output:</strong> 1    <p><strong>Constraints:</strong></p>  <ul>  <li><code>1 &lt;= nums.length &lt;= 20</code></li>  <li><code>0 &lt;= nums[i] &lt;= 1000</code></li>  <li><code>0 &lt;= sum(nums[i]) &lt;= 1000</code></li>  <li><code>-1000 &lt;= target &lt;= 1000</code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Backtracking, as trying all possibilities will give TLE. If remaining + values are not enough, we can exit early. e.g, target is 3, out of 5 -1s, first 3 are -, then remaining will not be enough. Memoize, as there will be repeat calculations.
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Target Sum" lines
# @param {Integer[]} nums
# @param {Integer} target
# @return {Integer}
# Read-Only for queries of sum of [l,r]
# pseudo_tree.query(l, r+1)

class PseudoSumSegTree
  def initialize(arr)
    @n = arr.size # size of the source array
    # query can have r till n, so sum of all elements is at prefix[n]
    @prefix_sum_arr = (1..@n).reduce([0]) {|res, i| res << res.last + arr[i-1]; res } # sum till i-1
  end
  
  # [l,r)
  def query(l,r)
    @prefix_sum_arr[r] - @prefix_sum_arr[l]
  end
end

def find_target_sum_ways(nums, target)
  n = nums.size;
  psg = PseudoSumSegTree.new(nums)
  cache = {}
  recurse =->(idx, sum) {
    return (sum==target ? 1 : 0) if idx==n
    return 0 if (target-sum).abs > psg.query(idx, n)
    cache[[idx, sum]] ||= (recurse.call(idx+1, sum+nums[idx]) + recurse.call(idx+1, sum-nums[idx]))
  }
  recurse.call(0, 0)
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>