---
title: 'ðŸ§€ Count Special Triplets'
description: '[leetcode link](https://leetcode.com/problems/count-special-triplets/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given an integer array <code>nums</code>.</p>  <p>A <strong>special triplet</strong> is defined as a triplet of indices <code>(i, j, k)</code> such that:</p>  <ul>  <li><code>0 &lt;= i &lt; j &lt; k &lt; n</code>, where <code>n = nums.length</code></li>  <li><code>nums[i] == nums[j] * 2</code></li>  <li><code>nums[k] == nums[j] * 2</code></li> </ul>  <p>Return the total number of <strong>special triplets</strong> in the array.</p>  <p>Since the answer may be large, return it <strong>modulo</strong> <code>10<sup>9</sup> + 7</code>.</p>   <p><strong class="example">Example 1:</strong></p>  <div class="example-block"> <p><strong>Input:</strong> <span class="example-io">nums = [6,3,6]</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io">1</span></p>  <p><br/> <strong>Explanation:</strong></p>  <p>The only special triplet is <code>(i, j, k) = (0, 1, 2)</code>, where:</p>  <ul>  <li><code>nums[0] = 6</code>, <code>nums[1] = 3</code>, <code>nums[2] = 6</code></li>  <li><code>nums[0] = nums[1] * 2 = 3 * 2 = 6</code></li>  <li><code>nums[2] = nums[1] * 2 = 3 * 2 = 6</code></li> </ul> </div>  <p><strong class="example">Example 2:</strong></p>  <div class="example-block"> <p><strong>Input:</strong> <span class="example-io">nums = [0,1,0,0]</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io">1</span></p>  <p><br/> <strong>Explanation:</strong></p>  <p>The only special triplet is <code>(i, j, k) = (0, 2, 3)</code>, where:</p>  <ul>  <li><code>nums[0] = 0</code>, <code>nums[2] = 0</code>, <code>nums[3] = 0</code></li>  <li><code>nums[0] = nums[2] * 2 = 0 * 2 = 0</code></li>  <li><code>nums[3] = nums[2] * 2 = 0 * 2 = 0</code></li> </ul> </div>  <p><strong class="example">Example 3:</strong></p>  <div class="example-block"> <p><strong>Input:</strong> <span class="example-io">nums = [8,4,2,8,4]</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io">2</span></p>  <p><br/> <strong>Explanation:</strong></p>  <p>There are exactly two special triplets:</p>  <ul>  <li><code>(i, j, k) = (0, 1, 3)</code>   <ul>   <li><code>nums[0] = 8</code>, <code>nums[1] = 4</code>, <code>nums[3] = 8</code></li>   <li><code>nums[0] = nums[1] * 2 = 4 * 2 = 8</code></li>   <li><code>nums[3] = nums[1] * 2 = 4 * 2 = 8</code></li>  </ul>  </li>  <li><code>(i, j, k) = (1, 2, 4)</code>  <ul>   <li><code>nums[1] = 4</code>, <code>nums[2] = 2</code>, <code>nums[4] = 4</code></li>   <li><code>nums[1] = nums[2] * 2 = 2 * 2 = 4</code></li>   <li><code>nums[4] = nums[2] * 2 = 2 * 2 = 4</code></li>  </ul>  </li> </ul> </div>   <p><strong>Constraints:</strong></p>  <ul>  <li><code>3 &lt;= n == nums.length &lt;= 10<sup>5</sup></code></li>  <li><code>0 &lt;= nums[i] &lt;= 10<sup>5</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      middle element, and its double at each end, forms 1 triplet

  for a j, if 2* val, is on left and right, we have 1 triplet
  considering each element as middle, check left and right counts for double_val
  for checking counts, when going from left to right, we can have total counter, which can act as right counter, and decremented
  and left counter, which will be incremented while going from L-&gt;R
  for each middle elem, left_count* right_count is added to result

    </Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Count Special Triplets" lines
# @param {Integer[]} nums
# @return {Integer}
def special_triplets(nums)
  big_mod = 1_000_000_000 + 7
  n = nums.size
  
  right_freq_h = Hash.new(0).merge(nums.tally)
  left_freq_h = Hash.new(0)
  result = 0
  
  (0...n).each do |i|
    mid_val = nums[i]
    right_freq_h[mid_val]-=1 # counter for remaining elements to the right
    result += left_freq_h[mid_val*2] * right_freq_h[mid_val*2] # double_vals to right and left
    left_freq_h[mid_val]+=1 # counter for elements to the left
  end

  result % big_mod
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>