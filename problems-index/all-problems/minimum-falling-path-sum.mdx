---
title: "ðŸ§€ Minimum Falling Path Sum"
description: '[leetcode link](https://leetcode.com/problems/minimum-falling-path-sum/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>Given an <code>n x n</code> array of integers <code>matrix</code>, return <em>the <strong>minimum sum</strong> of any <strong>falling path</strong> through</em> <code>matrix</code>.</p>  <p>A <strong>falling path</strong> starts at any element in the first row and chooses the element in the next row that is either directly below or diagonally left/right. Specifically, the next element from position <code>(row, col)</code> will be <code>(row + 1, col - 1)</code>, <code>(row + 1, col)</code>, or <code>(row + 1, col + 1)</code>.</p>   <p><strong class="example">Example 1:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/11/03/failing1-grid.jpg" style="width: 499px; height: 500px;" />  <strong>Input:</strong> matrix = [[2,1,3],[6,5,4],[7,8,9]] <br/> <strong>Output:</strong> 13 <br/> <strong>Explanation:</strong> There are two falling paths with a minimum sum as shown.   <p><strong class="example">Example 2:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/11/03/failing2-grid.jpg" style="width: 164px; height: 365px;" />  <strong>Input:</strong> matrix = [[-19,57],[-40,-5]] <br/> <strong>Output:</strong> -59 <br/> <strong>Explanation:</strong> The falling path with a minimum sum is shown.    <p><strong>Constraints:</strong></p>  <ul>  <li><code>n == matrix.length == matrix[i].length</code></li>  <li><code>1 &lt;= n &lt;= 100</code></li>  <li><code>-100 &lt;= matrix[i][j] &lt;= 100</code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Similar to paint house.

Process each row one by one starting from top. Current dp state only requires previous state.

Each index can come from previous rows index-1, index and index+1.

So, only 2 state arrays to be maintained. 

Add INF to start and end of array for simpler calculation
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Minimum Falling Path Sum" lines
# @param {Integer[][]} matrix
# @return {Integer}
def min_falling_path_sum(matrix)
  min_sum_arr = [Float::INFINITY] + matrix[0] + [Float::INFINITY]
  n = matrix[0].size

  matrix[1..].each do |row|
    new_arr = min_sum_arr.dup
    
    # j in row is j+1 in min_sum_arr
    (0...n).each do |j|
      new_arr[j+1] = row[j] + [min_sum_arr[j], min_sum_arr[j+1], min_sum_arr[j+2]].min
    end

    min_sum_arr = new_arr
  end

  min_sum_arr.min
end

```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>