---
title: "ðŸ§€ Maximum Difference Between Node and Ancestor"
description: '[leetcode link](https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>Given the <code>root</code> of a binary tree, find the maximum value <code>v</code> for which there exist <strong>different</strong> nodes <code>a</code> and <code>b</code> where <code>v = |a.val - b.val|</code> and <code>a</code> is an ancestor of <code>b</code>.</p>  <p>A node <code>a</code> is an ancestor of <code>b</code> if either: any child of <code>a</code> is equal to <code>b</code>&nbsp;or any child of <code>a</code> is an ancestor of <code>b</code>.</p>   <p><strong class="example">Example 1:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2020/11/09/tmp-tree.jpg" style="width: 400px; height: 390px;" />  <strong>Input:</strong> root = [8,3,10,1,6,null,14,null,null,4,7,13] <br/> <strong>Output:</strong> 7 <strong>Explanation: </strong>We have various ancestor-node differences, some of which are given below : |8 - 3| = 5 |3 - 7| = 4 |8 - 1| = 7 |10 - 13| = 3 Among all possible differences, the maximum value of 7 is obtained by |8 - 1| = 7.  <p><strong class="example">Example 2:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2020/11/09/tmp-tree-1.jpg" style="width: 250px; height: 349px;" />  <strong>Input:</strong> root = [1,null,2,null,0,3] <br/> <strong>Output:</strong> 3    <p><strong>Constraints:</strong></p>  <ul>  <li>The number of nodes in the tree is in the range <code>[2, 5000]</code>.</li>  <li><code>0 &lt;= Node.val &lt;= 10<sup>5</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      No notes for this problem
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Maximum Difference Between Node and Ancestor" lines
# Definition for a binary tree node.
# class TreeNode
#     attr_accessor :val, :left, :right
#     def initialize(val)
#         @val = val
#         @left, @right = nil, nil
#     end
# end

# @param {TreeNode} root
# @return {Integer}

# at every node, keep max and min from above.
# and calc max_diff for every node
def dfs(node, min_val, max_val)
    return if node.nil?
    @max_diff = [@max_diff, (min_val - node.val).abs, (max_val - node.val).abs].max
    dfs(node.left, *[min_val, node.val, max_val].minmax)
    dfs(node.right, *[min_val, node.val, max_val].minmax)
end

def max_ancestor_diff(root)
    @max_diff = -1;
    dfs(root, root.val, root.val)
    @max_diff
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>