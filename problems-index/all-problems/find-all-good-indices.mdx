---
title: 'ðŸ§€ Find All Good Indices'
description: '[leetcode link](https://leetcode.com/problems/find-all-good-indices/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given a <strong>0-indexed</strong> integer array <code>nums</code> of size <code>n</code> and a positive integer <code>k</code>.</p>  <p>We call an index <code>i</code> in the range <code>k &lt;= i &lt; n - k</code> <strong>good</strong> if the following conditions are satisfied:</p>  <ul>  <li>The <code>k</code> elements that are just <strong>before</strong> the index <code>i</code> are in <strong>non-increasing</strong> order.</li>  <li>The <code>k</code> elements that are just <strong>after</strong> the index <code>i</code> are in <strong>non-decreasing</strong> order.</li> </ul>  <p>Return <em>an array of all good indices sorted in <strong>increasing</strong> order</em>.</p>   <p><strong class="example">Example 1:</strong></p>   <strong>Input:</strong> nums = [2,1,1,1,3,4,1], k = 2 <br/> <strong>Output:</strong> [2,3] <br/> <strong>Explanation:</strong> There are two good indices in the array: - Index 2. The subarray [2,1] is in non-increasing order, and the subarray [1,3] is in non-decreasing order. - Index 3. The subarray [1,1] is in non-increasing order, and the subarray [3,4] is in non-decreasing order. Note that the index 4 is not good because [4,1] is not non-decreasing.  <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> nums = [2,1,1,2], k = 2 <br/> <strong>Output:</strong> [] <br/> <strong>Explanation:</strong> There are no good indices in this array.    <p><strong>Constraints:</strong></p>  <ul>  <li><code>n == nums.length</code></li>  <li><code>3 &lt;= n &lt;= 10<sup>5</sup></code></li>  <li><code>1 &lt;= nums[i] &lt;= 10<sup>6</sup></code></li>  <li><code>1 &lt;= k &lt;= n / 2</code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      max non-increasing (non-strict decreasing) of k ending at i exists
max non-decreasing (non-strict increasing) of k starting at i exists

calculate whether this is true for all indices in range (k, n-k)

indices where right k is valid, k non-decreasing to right, is same as k non-increasing to left if we start from end.

So we can use left_valid function again and send nums.reverse, to get the right_valid indices.
    </Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Find All Good Indices" lines
def good_indices(nums, k)
  n = nums.size
  return [] if k > n/2

  get_valid_indices = ->(arr, direction) do
    indices = []; left_max_non_inc_length = 1

    (1...(n-k)).each do |idx|
      indices << {left: idx, right: n-1-idx}[direction] if left_max_non_inc_length>= k

      # continue or reset based on if non-increasing property is satisfied
      left_max_non_inc_length = 1 + (arr[idx-1] >= arr[idx] ? left_max_non_inc_length : 0)
    end
    indices
  end

  # valid indices for left prefix and right suffix calls
  get_valid_indices.call(nums, :left) & get_valid_indices.call(nums.reverse, :right)
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>