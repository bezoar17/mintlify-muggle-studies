---
title: "ðŸ§€ Task Scheduler"
description: '[leetcode link](https://leetcode.com/problems/task-scheduler/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given an array of CPU <code>tasks</code>, each labeled with a letter from A to Z, and a number <code>n</code>. Each CPU interval can be idle or allow the completion of one task. Tasks can be completed in any order, but there&#39;s a constraint: there has to be a gap of <strong>at least</strong> <code>n</code> intervals between two tasks with the same label.</p>  <p>Return the <strong>minimum</strong> number of CPU intervals required to complete all tasks.</p>   <p><strong class="example">Example 1:</strong></p>  <div class="example-block" style="     border-color: var(--border-tertiary);     border-left-width: 2px;     color: var(--text-secondary);     font-size: .875rem;     margin-bottom: 1rem;     margin-top: 1rem;     overflow: visible;     padding-left: 1rem; "> <p><strong>Input:</strong> <span class="example-io" style="     font-family: Menlo,sans-serif;     font-size: 0.85rem; ">tasks = [&quot;A&quot;,&quot;A&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;], n = 2</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io" style=" font-family: Menlo,sans-serif; font-size: 0.85rem; ">8</span></p>  <p><br/> <strong>Explanation:</strong> A possible sequence is: A -&gt; B -&gt; idle -&gt; A -&gt; B -&gt; idle -&gt; A -&gt; B.</p>  <p>After completing task A, you must wait two intervals before doing A again. The same applies to task B. In the 3<sup>rd</sup> interval, neither A nor B can be done, so you idle. By the 4<sup>th</sup> interval, you can do A again as 2 intervals have passed.</p> </div>  <p><strong class="example">Example 2:</strong></p>  <div class="example-block" style="     border-color: var(--border-tertiary);     border-left-width: 2px;     color: var(--text-secondary);     font-size: .875rem;     margin-bottom: 1rem;     margin-top: 1rem;     overflow: visible;     padding-left: 1rem; "> <p><strong>Input:</strong> <span class="example-io" style="     font-family: Menlo,sans-serif;     font-size: 0.85rem; ">tasks = [&quot;A&quot;,&quot;C&quot;,&quot;A&quot;,&quot;B&quot;,&quot;D&quot;,&quot;B&quot;], n = 1</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io" style="     font-family: Menlo,sans-serif;     font-size: 0.85rem; ">6</span></p>  <p><br/> <strong>Explanation:</strong> A possible sequence is: A -&gt; B -&gt; C -&gt; D -&gt; A -&gt; B.</p>  <p>With a cooling interval of 1, you can repeat a task after just one other task.</p> </div>  <p><strong class="example">Example 3:</strong></p>  <div class="example-block" style="     border-color: var(--border-tertiary);     border-left-width: 2px;     color: var(--text-secondary);     font-size: .875rem;     margin-bottom: 1rem;     margin-top: 1rem;     overflow: visible;     padding-left: 1rem; "> <p><strong>Input:</strong> <span class="example-io" style="     font-family: Menlo,sans-serif;     font-size: 0.85rem; ">tasks = [&quot;A&quot;,&quot;A&quot;,&quot;A&quot;, &quot;B&quot;,&quot;B&quot;,&quot;B&quot;], n = 3</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io" style="     font-family: Menlo,sans-serif;     font-size: 0.85rem; ">10</span></p>  <p><br/> <strong>Explanation:</strong> A possible sequence is: A -&gt; B -&gt; idle -&gt; idle -&gt; A -&gt; B -&gt; idle -&gt; idle -&gt; A -&gt; B.</p>  <p>There are only two types of tasks, A and B, which need to be separated by 3 intervals. This leads to idling twice between repetitions of these tasks.</p> </div>   <p><strong>Constraints:</strong></p>  <ul>  <li><code>1 &lt;= tasks.length &lt;= 10<sup>4</sup></code></li>  <li><code>tasks[i]</code> is an uppercase English letter.</li>  <li><code>0 &lt;= n &lt;= 100</code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      There is a formula, and there is a simulation way to do this.

Both are there in the submission.


formula is 

max(tasks.size,  (max_freq-1) *(n+1) + no_of_max_freq )
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Task Scheduler" lines
def least_interval(tasks, n)
  freq_tally = tasks.tally
  task_frequencies = freq_tally.values
#   max_freq = task_frequencies.max
#   no_of_max_freq = freq_tally.count{|k,v| v==max_freq }

#   return [ ((max_freq-1) *(n+1) + no_of_max_freq), tasks.size ].max

  # below is the simulation of task scheduling, and in a linear time.
  heap = Containers::MaxHeap.new(task_frequencies)
  
  time = 0
  queue = []

  until heap.empty? && queue.empty?
    time += 1

    # current task will be the 1 with most freq, and it will be put on queue for later time
    # if heap is empty and queue's first element is scheduled for later time, this loop will
    # run without any of the conditions being satisfied, and essentially being an idle cycle
    if !heap.empty?
      task_frequency = heap.pop - 1
      queue.append([task_frequency, time + n]) if task_frequency > 0 # actual scheduling
    end

    # if queue's first element's time has come, put it on heap, so it can come in next cycle
    if !queue.empty? && queue[0][1] == time
      heap.push(queue.shift[0])
    end
  end

  time
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>