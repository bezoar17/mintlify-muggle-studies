---
title: 'ðŸ§€ Grid Game'
description: '[leetcode link](https://leetcode.com/problems/grid-game/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given a <strong>0-indexed</strong> 2D array <code>grid</code> of size <code>2 x n</code>, where <code>grid[r][c]</code> represents the number of points at position <code>(r, c)</code> on the matrix. Two robots are playing a game on this matrix.</p>  <p>Both robots initially start at <code>(0, 0)</code> and want to reach <code>(1, n-1)</code>. Each robot may only move to the <strong>right</strong> (<code>(r, c)</code> to <code>(r, c + 1)</code>) or <strong>down </strong>(<code>(r, c)</code> to <code>(r + 1, c)</code>).</p>  <p>At the start of the game, the <strong>first</strong> robot moves from <code>(0, 0)</code> to <code>(1, n-1)</code>, collecting all the points from the cells on its path. For all cells <code>(r, c)</code> traversed on the path, <code>grid[r][c]</code> is set to <code>0</code>. Then, the <strong>second</strong> robot moves from <code>(0, 0)</code> to <code>(1, n-1)</code>, collecting the points on its path. Note that their paths may intersect with one another.</p>  <p>The <strong>first</strong> robot wants to <strong>minimize</strong> the number of points collected by the <strong>second</strong> robot. In contrast, the <strong>second </strong>robot wants to <strong>maximize</strong> the number of points it collects. If both robots play <strong>optimally</strong>, return <em>the <b>number of points</b> collected by the <strong>second</strong> robot.</em></p>   <p><strong class="example">Example 1:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/08/a1.png" style="width: 388px; height: 103px;" />  <strong>Input:</strong> grid = [[2,5,4],[1,5,1]] <br/> <strong>Output:</strong> 4 <br/> <strong>Explanation:</strong> The optimal path taken by the first robot is shown in red, and the optimal path taken by the second robot is shown in blue. The cells visited by the first robot are set to 0. The second robot will collect 0 + 0 + 4 + 0 = 4 points.   <p><strong class="example">Example 2:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/08/a2.png" style="width: 384px; height: 105px;" />  <strong>Input:</strong> grid = [[3,3,1],[8,5,2]] <br/> <strong>Output:</strong> 4 <br/> <strong>Explanation:</strong> The optimal path taken by the first robot is shown in red, and the optimal path taken by the second robot is shown in blue. The cells visited by the first robot are set to 0. The second robot will collect 0 + 3 + 1 + 0 = 4 points.   <p><strong class="example">Example 3:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/08/a3.png" style="width: 493px; height: 103px;" />  <strong>Input:</strong> grid = [[1,3,1,15],[1,3,3,1]] <br/> <strong>Output:</strong> 7 <strong>Explanation: </strong>The optimal path taken by the first robot is shown in red, and the optimal path taken by the second robot is shown in blue. The cells visited by the first robot are set to 0. The second robot will collect 0 + 1 + 3 + 3 + 0 = 7 points.    <p><strong>Constraints:</strong></p>  <ul>  <li><code>grid.length == 2</code></li>  <li><code>n == grid[r].length</code></li>  <li><code>1 &lt;= n &lt;= 5 * 10<sup>4</sup></code></li>  <li><code>1 &lt;= grid[r][c] &lt;= 10<sup>5</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
       path can be identified by when you choose to go down, say i
  prefix sum will be used to calc options for robot1 and robot2
  If, robot1 makes switch at i; it takes [0,i] from row1, and [i,n] from row 2.
  robot2 can only take one of the remaining subarrays, [0,i-1] in row2 or [i+1, n] in row1, it will choose the max. we have to minimize this value. 
    </Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Grid Game" lines
# @param {Integer[][]} grid
# @return {Integer}

# Read-Only for queries of sum of [l,r]
# pseudo_tree.query(l, r+1)
class PseudoSumSegTree
  def initialize(arr)
    @n = arr.size # size of the source array
    # query can have r till n, so sum of all elements is at prefix[n]
    @prefix_sum_arr = (1..@n).reduce([0]) {|res, i| res << res.last + arr[i-1]; res } # sum till i-1
  end
  
  # [l,r)
  def query(l,r)
    @prefix_sum_arr[r] - @prefix_sum_arr[l]
  end
end

def grid_game(grid)
  # path can be identified by when you choose to go down, say i
  # prefix sum will be used to calc options for robot1 and robot2
  # If, robot1 makes switch at i; it takes [0,i] from row1, and [i,n] from row 2.
  # robot2 can only take one of the remaining subarrays, [0,i-1] in row2 or [i+1, n] in row1, it will choose the max.
  # we have to minimize this value

  sg_1 = PseudoSumSegTree.new(grid[0].dup)
  sg_2 = PseudoSumSegTree.new(grid[1].dup)
  n = grid[0].size

  (0...n).reduce(Float::INFINITY) do |result, i|
    # switch at i
    # robot1 = sg_1.query(0,i+1) + sg_2.query(i,n)
    robot2 = [sg_2.query(0,i), sg_1.query(i+1, n)].max
    [robot2, result].min
  end
end

```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>