---
title: "ðŸ§€ Count Vowel Strings in Ranges"
description: '[leetcode link](https://leetcode.com/problems/count-vowel-strings-in-ranges/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given a <strong>0-indexed</strong> array of strings <code>words</code> and a 2D array of integers <code>queries</code>.</p>  <p>Each query <code>queries[i] = [l<sub>i</sub>, r<sub>i</sub>]</code> asks us to find the number of strings present at the indices ranging from <code>l<sub>i</sub></code> to <code>r<sub>i</sub></code> (both <strong>inclusive</strong>) of <code>words</code> that start and end with a vowel.</p>  <p>Return <em>an array </em><code>ans</code><em> of size </em><code>queries.length</code><em>, where </em><code>ans[i]</code><em> is the answer to the </em><code>i</code><sup>th</sup><em> query</em>.</p>  <p><strong>Note</strong> that the vowel letters are <code>&#39;a&#39;</code>, <code>&#39;e&#39;</code>, <code>&#39;i&#39;</code>, <code>&#39;o&#39;</code>, and <code>&#39;u&#39;</code>.</p>   <p><strong class="example">Example 1:</strong></p>   <strong>Input:</strong> words = [&quot;aba&quot;,&quot;bcb&quot;,&quot;ece&quot;,&quot;aa&quot;,&quot;e&quot;], queries = [[0,2],[1,4],[1,1]] <br/> <strong>Output:</strong> [2,3,0] <br/> <strong>Explanation:</strong> The strings starting and ending with a vowel are &quot;aba&quot;, &quot;ece&quot;, &quot;aa&quot; and &quot;e&quot;. The answer to the query [0,2] is 2 (strings &quot;aba&quot; and &quot;ece&quot;). to query [1,4] is 3 (strings &quot;ece&quot;, &quot;aa&quot;, &quot;e&quot;). to query [1,1] is 0. We return [2,3,0].   <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> words = [&quot;a&quot;,&quot;e&quot;,&quot;i&quot;], queries = [[0,2],[0,1],[2,2]] <br/> <strong>Output:</strong> [3,2,1] <br/> <strong>Explanation:</strong> Every string satisfies the conditions, so we return [3,2,1].   <p><strong>Constraints:</strong></p>  <ul>  <li><code>1 &lt;= words.length &lt;= 10<sup>5</sup></code></li>  <li><code>1 &lt;= words[i].length &lt;= 40</code></li>  <li><code>words[i]</code> consists only of lowercase English letters.</li>  <li><code>sum(words[i].length) &lt;= 3 * 10<sup>5</sup></code></li>  <li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>  <li><code>0 &lt;= l<sub>i</sub> &lt;= r<sub>i</sub> &lt;&nbsp;words.length</code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Convert words to 0 or 1. In this array, answer for query l,r is sum of subarray, use prefix sum array to get answer for a query in O(1)
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Count Vowel Strings in Ranges" lines
# @param {String[]} words
# @param {Integer[][]} queries
# @return {Integer[]}
# Read-Only for queries of sum of [l,r]
# pseudo_tree.query(l, r+1)

class PseudoSumSegTree
  def initialize(arr)
    @n = arr.size # size of the source array
    # query can have r till n, so sum of all elements is at prefix[n]
    @prefix_sum_arr = (1..@n).reduce([0]) {|res, i| res << res.last + arr[i-1]; res } # sum till i-1
  end
  
  # [l,r)
  def query(l,r)
    @prefix_sum_arr[r] - @prefix_sum_arr[l]
  end
end

def vowel_strings(words, queries)
  vowels = ['a','e','i','o','u'].to_set
  arr = words.map { |x| (vowels.include?(x[0]) && vowels.include?(x[-1])) ? 1 : 0 }
  psg = PseudoSumSegTree.new(arr)
  queries.map {|l,r| psg.query(l,r+1) }
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>