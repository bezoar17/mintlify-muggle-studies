---
title: "ðŸ§€ Minimum Time to Break Locks I"
description: '[leetcode link](https://leetcode.com/problems/minimum-time-to-break-locks-i/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>Bob is stuck in a dungeon and must break <code>n</code> locks, each requiring some amount of <strong>energy</strong> to break. The required energy for each lock is stored in an array called <code>strength</code> where <code>strength[i]</code> indicates the energy needed to break the <code>i<sup>th</sup></code> lock.</p>  <p>To break a lock, Bob uses a sword with the following characteristics:</p>  <ul>  <li>The initial energy of the sword is 0.</li>  <li>The initial factor <code><font face="monospace">x</font></code> by which the energy of the sword increases is 1.</li>  <li>Every minute, the energy of the sword increases by the current factor <code>x</code>.</li>  <li>To break the <code>i<sup>th</sup></code> lock, the energy of the sword must reach <strong>at least</strong> <code>strength[i]</code>.</li>  <li>After breaking a lock, the energy of the sword resets to 0, and the factor <code>x</code> increases by a given value <code>k</code>.</li> </ul>  <p>Your task is to determine the <strong>minimum</strong> time in minutes required for Bob to break all <code>n</code> locks and escape the dungeon.</p>  <p>Return the <strong>minimum </strong>time required for Bob to break all <code>n</code> locks.</p>   <p><strong class="example">Example 1:</strong></p>  <div class="example-block"> <p><strong>Input:</strong> <span class="example-io">strength = [3,4,1], k = 1</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io">4</span></p>  <p><br/> <strong>Explanation:</strong></p>  <table style="border: 1px solid black;">  <tbody>   <tr>    <th style="border: 1px solid black;">Time</th>    <th style="border: 1px solid black;">Energy</th>    <th style="border: 1px solid black;">x</th>    <th style="border: 1px solid black;">Action</th>    <th style="border: 1px solid black;">Updated x</th>   </tr>   <tr>    <td style="border: 1px solid black;">0</td>    <td style="border: 1px solid black;">0</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">Nothing</td>    <td style="border: 1px solid black;">1</td>   </tr>   <tr>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">Break 3<sup>rd</sup> Lock</td>    <td style="border: 1px solid black;">2</td>   </tr>   <tr>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">Nothing</td>    <td style="border: 1px solid black;">2</td>   </tr>   <tr>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">4</td>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">Break 2<sup>nd</sup> Lock</td>    <td style="border: 1px solid black;">3</td>   </tr>   <tr>    <td style="border: 1px solid black;">4</td>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">Break 1<sup>st</sup> Lock</td>    <td style="border: 1px solid black;">3</td>   </tr>  </tbody> </table>  <p>The locks cannot be broken in less than 4 minutes; thus, the answer is 4.</p> </div>  <p><strong class="example">Example 2:</strong></p>  <div class="example-block"> <p><strong>Input:</strong> <span class="example-io">strength = [2,5,4], k = 2</span></p>  <p><br/> <strong>Output:</strong> <span class="example-io">5</span></p>  <p><br/> <strong>Explanation:</strong></p>  <table style="border: 1px solid black;">  <tbody>   <tr>    <th style="border: 1px solid black;">Time</th>    <th style="border: 1px solid black;">Energy</th>    <th style="border: 1px solid black;">x</th>    <th style="border: 1px solid black;">Action</th>    <th style="border: 1px solid black;">Updated x</th>   </tr>   <tr>    <td style="border: 1px solid black;">0</td>    <td style="border: 1px solid black;">0</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">Nothing</td>    <td style="border: 1px solid black;">1</td>   </tr>   <tr>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">Nothing</td>    <td style="border: 1px solid black;">1</td>   </tr>   <tr>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">2</td>    <td style="border: 1px solid black;">1</td>    <td style="border: 1px solid black;">Break 1<sup>st</sup> Lock</td>    <td style="border: 1px solid black;">3</td>   </tr>   <tr>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">Nothing</td>    <td style="border: 1px solid black;">3</td>   </tr>   <tr>    <td style="border: 1px solid black;">4</td>    <td style="border: 1px solid black;">6</td>    <td style="border: 1px solid black;">3</td>    <td style="border: 1px solid black;">Break 2<sup>n</sup><sup>d</sup> Lock</td>    <td style="border: 1px solid black;">5</td>   </tr>   <tr>    <td style="border: 1px solid black;">5</td>    <td style="border: 1px solid black;">5</td>    <td style="border: 1px solid black;">5</td>    <td style="border: 1px solid black;">Break 3<sup>r</sup><sup>d</sup> Lock</td>    <td style="border: 1px solid black;">7</td>   </tr>  </tbody> </table>  <p>The locks cannot be broken in less than 5 minutes; thus, the answer is 5.</p> </div>   <p><strong>Constraints:</strong></p>  <ul>  <li><code>n == strength.length</code></li>  <li><code>1 &lt;= n &lt;= 8</code></li>  <li><code>1 &lt;= K &lt;= 10</code></li>  <li><code>1 &lt;= strength[i] &lt;= 10<sup>6</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Constraints are in a way that all permutations can be checked. But to check all permutations, use bitmask and DP. Represent state by bitmask, and then move to next possible state, and update time required. Result would be min value for mask of 8 1s, representing all locks have been broken.

Start from 0, then add 1 bit at each of the 8 options, from there add 1 more to the 8 states, here we'll have 7 options, and so on. Total 8! options are present. When a lock gets broken(position or rank) decides how much time it would take, which is strength/ 1 + (r-1)* k, ceil of this, where r is rank, 1 for the first lock, and so on.
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Minimum Time to Break Locks I" lines
# @param {Integer[]} strength
# @param {Integer} k
# @return {Integer}
def find_minimum_time(strength, k)
  n = strength.size
  dp_last_states = {0=>0}
  
  n.times do |round|
    curr_states = Hash.new(Float::INFINITY)
    (0...n).each do |i|
      lock_mask = 1<<i
      dp_last_states.each do |prev_mask, prev_value|
        next if prev_mask & lock_mask != 0 # this is not actually needed, as adding same lock will only increase value, and we're taking min
        curr_states[prev_mask|lock_mask] = [curr_states[prev_mask|lock_mask], prev_value + (strength[i].to_f/(1 + round*k)).ceil].min
      end
    end
    dp_last_states = curr_states
  end

  dp_last_states[(1<<n)-1]
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>