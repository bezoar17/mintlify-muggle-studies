---
title: "ðŸ§€ Cinema Seat Allocation"
description: '[leetcode link](https://leetcode.com/problems/cinema-seat-allocation/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p><img alt="" src="https://assets.leetcode.com/uploads/2020/02/14/cinema_seats_1.png" style="width: 400px; height: 149px;" /></p>  <p>A cinema&nbsp;has <code>n</code>&nbsp;rows of seats, numbered from 1 to <code>n</code>&nbsp;and there are ten&nbsp;seats in each row, labelled from 1&nbsp;to 10&nbsp;as shown in the figure above.</p>  <p>Given the array <code>reservedSeats</code> containing the numbers of seats already reserved, for example, <code>reservedSeats[i] = [3,8]</code>&nbsp;means the seat located in row <strong>3</strong> and labelled with <b>8</b>&nbsp;is already reserved.</p>  <p><em>Return the maximum number of four-person groups&nbsp;you can assign on the cinema&nbsp;seats.</em> A four-person group&nbsp;occupies four&nbsp;adjacent seats <strong>in one single row</strong>. Seats across an aisle (such as [3,3]&nbsp;and [3,4]) are not considered to be adjacent, but there is an exceptional case&nbsp;on which an aisle split&nbsp;a four-person group, in that case, the aisle split&nbsp;a four-person group in the middle,&nbsp;which means to have two people on each side.</p>   <p><strong class="example">Example 1:</strong></p>  <p><img alt="" src="https://assets.leetcode.com/uploads/2020/02/14/cinema_seats_3.png" style="width: 400px; height: 96px;" /></p>   <strong>Input:</strong> n = 3, reservedSeats = [[1,2],[1,3],[1,8],[2,6],[3,1],[3,10]] <br/> <strong>Output:</strong> 4 <br/> <strong>Explanation:</strong> The figure above shows the optimal allocation for four groups, where seats mark with blue are already reserved and contiguous seats mark with orange are for one group.   <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> n = 2, reservedSeats = [[2,1],[1,8],[2,6]] <br/> <strong>Output:</strong> 2   <p><strong class="example">Example 3:</strong></p>   <strong>Input:</strong> n = 4, reservedSeats = [[4,3],[1,4],[4,6],[1,7]] <br/> <strong>Output:</strong> 4    <p><strong>Constraints:</strong></p>  <ul>  <li><code>1 &lt;= n &lt;= 10^9</code></li>  <li><code>1 &lt;=&nbsp;reservedSeats.length &lt;= min(10*n, 10^4)</code></li>  <li><code>reservedSeats[i].length == 2</code></li>  <li><code>1&nbsp;&lt;=&nbsp;reservedSeats[i][0] &lt;= n</code></li>  <li><code>1 &lt;=&nbsp;reservedSeats[i][1] &lt;= 10</code></li>  <li>All <code>reservedSeats[i]</code> are distinct.</li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Trick is only to not initialize the seatmap with n. But only with rows which have been reserved. And first and last col are irrelevant
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Cinema Seat Allocation" lines
# @param {Integer} n
# @param {Integer[][]} reserved_seats
# @return {Integer}
def max_number_of_families(n, reserved_seats)
  reserved_rows = {}
  reserved_seats.each {|x,y|
    reserved_rows[x] = Array.new(9, 0) unless reserved_rows.has_key?(x);
    reserved_rows[x][y-1] = 1 if (y-1).between?(1,8);
  }

  four_group_count = (n-reserved_rows.size) * 2

  reserved_rows.each do |i, row|
    partition_1_valid = row[1]==0 && row[2] ==0
    partition_3_valid = row[7]==0 && row[8] ==0
    
    partition_2_first_valid = row[3]==0 && row[4]==0
    partition_2_last_valid =  row[5]==0 && row[6]==0

    if partition_1_valid && partition_2_first_valid && partition_3_valid && partition_2_last_valid
      four_group_count+=2
    elsif (partition_1_valid && partition_2_first_valid) || (partition_3_valid && partition_2_last_valid) || (partition_2_first_valid && partition_2_last_valid)
      four_group_count+=1
    end
  end

  four_group_count
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>