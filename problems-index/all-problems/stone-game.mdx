---
title: "ðŸ§€ Stone Game"
description: '[leetcode link](https://leetcode.com/problems/stone-game/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>Alice and Bob play a game with piles of stones. There are an <strong>even</strong> number of piles arranged in a row, and each pile has a <strong>positive</strong> integer number of stones <code>piles[i]</code>.</p>  <p>The objective of the game is to end with the most stones. The <strong>total</strong> number of stones across all the piles is <strong>odd</strong>, so there are no ties.</p>  <p>Alice and Bob take turns, with <strong>Alice starting first</strong>. Each turn, a player takes the entire pile of stones either from the <strong>beginning</strong> or from the <strong>end</strong> of the row. This continues until there are no more piles left, at which point the person with the <strong>most stones wins</strong>.</p>  <p>Assuming Alice and Bob play optimally, return <code>true</code><em> if Alice wins the game, or </em><code>false</code><em> if Bob wins</em>.</p>   <p><strong class="example">Example 1:</strong></p>   <strong>Input:</strong> piles = [5,3,4,5] <br/> <strong>Output:</strong> true <br/> <strong>Explanation:</strong>  Alice starts first, and can only take the first 5 or the last 5. Say she takes the first 5, so that the row becomes [3, 4, 5]. If Bob takes 3, then the board is [4, 5], and Alice takes 5 to win with 10 points. If Bob takes the last 5, then the board is [3, 4], and Alice takes 4 to win with 9 points. This demonstrated that taking the first 5 was a winning move for Alice, so we return true.   <p><strong class="example">Example 2:</strong></p>   <strong>Input:</strong> piles = [3,7,2,3] <br/> <strong>Output:</strong> true    <p><strong>Constraints:</strong></p>  <ul>  <li><code>2 &lt;= piles.length &lt;= 500</code></li>  <li><code>piles.length</code> is <strong>even</strong>.</li>  <li><code>1 &lt;= piles[i] &lt;= 500</code></li>  <li><code>sum(piles[i])</code> is <strong>odd</strong>.</li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Same as https://leetcode.com/problems/predict-the-winner/
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Stone Game" lines
# @param {Integer[]} piles
# @return {Boolean}
def stone_game(piles)
  predict_the_winner(piles)
end

# @param {Integer[]} nums
# @return {Boolean}
def predict_the_winner(nums)
  @number_arr = nums
  n = nums.size
  @dp = Array.new(n) { Array.new(n) }
  max_diff(0, n-1) > 0
end

def max_diff(left, right)
  return @number_arr[left] if left == right

  return @dp[left][right] unless @dp[left][right].nil?

  left_take_score = @number_arr[left] - max_diff(left + 1, right)
  right_take_score = @number_arr[right] - max_diff(left, right-1)

  @dp[left][right] = [left_take_score, right_take_score].max
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>