---
title: "ðŸ§€ Minimum Operations to Make a Uni-Value Grid"
description: '[leetcode link](https://leetcode.com/problems/minimum-operations-to-make-a-uni-value-grid/description/)'
mode: 'wide'
---
<Tabs>
  <Tab title="Question" icon="circle-question" iconType="regular">
    <Card>
      <p>You are given a 2D integer <code>grid</code> of size <code>m x n</code> and an integer <code>x</code>. In one operation, you can <strong>add</strong> <code>x</code> to or <strong>subtract</strong> <code>x</code> from any element in the <code>grid</code>.</p>  <p>A <strong>uni-value grid</strong> is a grid where all the elements of it are equal.</p>  <p>Return <em>the <strong>minimum</strong> number of operations to make the grid <strong>uni-value</strong></em>. If it is not possible, return <code>-1</code>.</p>   <p><strong class="example">Example 1:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/21/gridtxt.png" style="width: 164px; height: 165px;" />  <strong>Input:</strong> grid = [[2,4],[6,8]], x = 2 <br/> <strong>Output:</strong> 4 <br/> <strong>Explanation:</strong> We can make every element equal to 4 by doing the following:  - Add x to 2 once. - Subtract x from 6 once. - Subtract x from 8 twice. A total of 4 operations were used.   <p><strong class="example">Example 2:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/21/gridtxt-1.png" style="width: 164px; height: 165px;" />  <strong>Input:</strong> grid = [[1,5],[2,3]], x = 1 <br/> <strong>Output:</strong> 5 <br/> <strong>Explanation:</strong> We can make every element equal to 3.   <p><strong class="example">Example 3:</strong></p> <img alt="" src="https://assets.leetcode.com/uploads/2021/09/21/gridtxt-2.png" style="width: 164px; height: 165px;" />  <strong>Input:</strong> grid = [[1,2],[3,4]], x = 2 <br/> <strong>Output:</strong> -1 <br/> <strong>Explanation:</strong> It is impossible to make every element equal.    <p><strong>Constraints:</strong></p>  <ul>  <li><code>m == grid.length</code></li>  <li><code>n == grid[i].length</code></li>  <li><code>1 &lt;= m, n &lt;= 10<sup>5</sup></code></li>  <li><code>1 &lt;= m * n &lt;= 10<sup>5</sup></code></li>  <li><code>1 &lt;= x, grid[i][j] &lt;= 10<sup>4</sup></code></li> </ul> 
    </Card>
  </Tab>
  <Tab title="Solution" icon="lightbulb" iconType="regular" >
    <Card>
      Imagine the number line, if all nums have same mod with x, then only all can become same after ops of +- x any times. If mod is different, we have to return -1. Now, the minimum ops needed will be when all converge to the middle. Since all mod values are same, we just see which element is in the middle, and calculate ops needed by (num-median)/x. It will always be divisible if mods are same.
</Card>
  <Expandable title="code">
    <CodeGroup dropdown>
```ruby title="Minimum Operations to Make a Uni-Value Grid" lines
# @param {Integer[][]} grid
# @param {Integer} x
# @return {Integer}
def min_operations(grid, x)
  nums = grid.flatten.sort
  mod_val = nums.first % x
  mid = nums[nums.size/2]
  ops=0
  
  nums.each do |val|
    return -1 if val%x != mod_val
    ops+=(val-mid).abs/x
  end
  ops
end
```
    </CodeGroup>
  </Expandable>
  </Tab>
</Tabs>